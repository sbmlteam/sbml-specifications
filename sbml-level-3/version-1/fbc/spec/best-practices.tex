% -*- TeX-master: "main"; fill-column: 72 -*-

\section{Best practices}
\label{best-practices}

In this section, we illustrate a number of practices for using and
interpreting various constructs in the \FBCPackage.
These recommendations are non-normative, ignoring them will not render a model invalid, rather they are suggested as ways of enhancing model inter-operability. For a description of the additional SBO terms relevant to \FBC models please see the SBO appendix.

\subsection{Examples contrasting the \SBML L2 encoding with L3 and \FBC}
\label{best-practices-cobraV2}
These examples contrast some elements of an existing model, iJR904 from the \textsf{BiGG} Database encoded in the \textsf{COBRA} SBML Level~2 Version~1 format \citep{ijr904, bigg, cobra} that have been translated into SBML Level~3 Version~1 \FBC Version 2.
%using the \textsf{CBMPy} implementation of the \FBC package \citep{pysces, cbmpy} and \textsf{libSBML} experimental ver.~5.6.0 \citep{libsbml}.

\subsubsection*{Objective function definition}
\paragraph{\SBML Level 2 objective function}
\exampleFile{examples/ex_objf_bigg.txt}

\paragraph{The \SBML Level 3 objective function}
\protect\exampleFile{examples/ex_objf_l3.txt}

\subsubsection*{Species definition}
\paragraph{\SBML Level 2 \Species annotation version 1}
Examine the \SBML Level~2 Version~1 \Species definition. Note how the \token{name} attribute is overloaded with the chemical formula in a tool specific way.
%\textsf{COBRA} \citep{bigg, cobra}
%
\exampleFile{examples/ex_spec_bigg.txt}

\paragraph{\SBML Level 2 \Species annotation version 2}
A variation of the previous syntax that appeared in later models.

\bigskip\smallskip
\exampleFile{examples/ex_spec_cobra.txt}

\paragraph{The \SBML Level 3 \FBC \Species attributes}
With the adoption of \SBML \FBC these \Species properties can now be unified into a common format.
%
\exampleFile{examples/ex_spec_l3.txt}

\subsubsection*{Reaction definition and flux bounds}
%\textbf{\color{Mahogany}To be updated when V2 syntax is stable.}
\paragraph{\SBML Level 2 \Reaction}
%
\exampleFile{examples/ex_reaction_bigg.txt}


\paragraph{The \SBML Level 3 \FBC \Reaction}

As an example of a good annotation practice the \textsf{EC number} stored in the \Notes element has been converted into MIRIAM compliant RDF. The \FBCPackage also facilitates the structured definition and use of gene protein associations and flux capacity constraints.
%
\bigskip\bigskip
\exampleFile{examples/v2harmony-ex_reaction_l3_nokv.txt}
%
%\exampleFile{examples/v2harmony-ex_fb_l3.txt}

\newpage
\subsection{An example of a strict FBC Version 2 model (XML)}
\label{best-practices-V2}
This section highlights the best practices for a complete \FBC Version 2 model. To improve readability, detailed annotations as described in Section~\ref{best-practices-cobraV2} and unit definitions have been omitted.

\exampleFile{examples/v2harmony-ex_bp-complete.txt}

% I've taken the unit definitions out of the example to shorten it. Here
% they are in case we need them.
%  <listOfUnitDefinitions>
%   <unitDefinition id="volume" name="volume">
%    <listOfUnits>
%     <unit kind="litre" exponent="1" scale="0" multiplier="1"/>
%    </listOfUnits>
%   </unitDefinition>
%   <unitDefinition id="substance" name="substance">
%    <listOfUnits>
%     <unit kind="mole" exponent="1" scale="0" multiplier="1"/>
%    </listOfUnits>
%   </unitDefinition>
%   <unitDefinition id="time" name="time">
%    <listOfUnits>
%     <unit kind="second" exponent="1" scale="0" multiplier="1"/>
%    </listOfUnits>
%   </unitDefinition>
%   <unitDefinition id="mmol_per_gDW_per_hr" name="mmol_per_gDW_per_hr">
%    <listOfUnits>
%     <unit kind="mole" exponent="1" scale="-3" multiplier="1"/>
%     <unit kind="gram" exponent="-1" scale="0" multiplier="1"/>
%     <unit kind="second" exponent="-1" scale="0" multiplier="0.00027777"/>
%    </listOfUnits>
%  </listOfUnitDefinitions>

\newpage
\subsection{Key value pairs in FBC Version 3}
\label{best-practices-V3}
The \KeyValuePair construct should only be used for annotations that cannot be encoded with either a different SBML L3 Package or the standard format for annotations used within SBML.
